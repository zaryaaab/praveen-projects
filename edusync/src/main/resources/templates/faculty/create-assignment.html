<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{layout :: head}">
    <title>EduSync - Create Assignment</title>
</head>
<body>
    <nav th:replace="~{layout :: nav}"></nav>
    
    <div class="main-content">
        <div class="container">
            <!-- Alert Messages -->
            <div th:if="${success}" class="alert alert-success" role="alert" th:text="${success}"></div>
            <div th:if="${error}" class="alert alert-danger" role="alert" th:text="${error}"></div>
            
            <!-- Page Content -->
            <h2 class="mb-4">Create New Assignment</h2>
            
            <!-- No Courses Message -->
            <div th:if="${courses == null || courses.isEmpty()}" class="alert alert-warning">
                <i class="bi bi-exclamation-triangle"></i> You need to be assigned to at least one course before you can create assignments. Please contact the administrator.
            </div>
            
            <!-- Assignment Form -->
            <div th:if="${courses != null && !courses.isEmpty()}" class="card mb-4">
                <div class="card-header bg-primary text-white">
                    <h5 class="mb-0">Assignment Details</h5>
                </div>
                <div class="card-body">
                    <form th:action="@{/faculty/assignments/save}" method="post" th:object="${assignment}">
                        <div class="mb-3">
                            <label for="title" class="form-label">Title <span class="text-danger">*</span></label>
                            <input type="text" class="form-control" id="title" th:field="*{title}" required>
                        </div>
                        
                        <div class="mb-3">
                            <label for="description" class="form-label">Description</label>
                            <textarea class="form-control" id="description" th:field="*{description}" rows="4"></textarea>
                        </div>
                        
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="courseId" class="form-label">Course <span class="text-danger">*</span></label>
                                <select class="form-select" id="courseId" name="courseId" required>
                                    <option value="">Select Course</option>
                                    <option th:each="course : ${courses}" 
                                            th:value="${course.id}" 
                                            th:text="${course.courseName + ' (' + course.courseCode + ')'}">
                                        Course Name (CS101)
                                    </option>
                                </select>
                            </div>
                            <div class="col-md-6">
                                <label for="dueDate" class="form-label">Due Date <span class="text-danger">*</span></label>
                                <input type="date" class="form-control" id="dueDate" name="dueDate" required>
                            </div>
                        </div>
                        
                        <div class="mb-3">
                            <label for="totalMarks" class="form-label">Total Marks <span class="text-danger">*</span></label>
                            <input type="number" class="form-control" id="totalMarks" th:field="*{totalMarks}" min="1" required>
                        </div>
                        
                        <div class="d-flex justify-content-between mt-4">
                            <a th:href="@{/faculty/assignments}" class="btn btn-outline-secondary">
                                <i class="bi bi-arrow-left"></i> Cancel
                            </a>
                            <button type="submit" class="btn btn-primary">
                                <i class="bi bi-save"></i> Create Assignment
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
    
    <footer th:replace="~{layout :: footer}"></footer>
    
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    
    <!-- Assignment Form Script -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Set minimum due date to today
            const dueDateInput = document.getElementById('dueDate');
            if (dueDateInput) {
                const today = new Date();
                const year = today.getFullYear();
                let month = today.getMonth() + 1;
                let day = today.getDate();
                
                // Add leading zeros
                month = month < 10 ? '0' + month : month;
                day = day < 10 ? '0' + day : day;
                
                const formattedDate = `${year}-${month}-${day}`;
                dueDateInput.setAttribute('min', formattedDate);
            }
        });
    </script>
</body>
</html> 